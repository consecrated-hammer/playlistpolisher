# =============================================================================
# PLAYLIST POLISHER - SELF-HOSTING CONFIGURATION
# =============================================================================
# Copy this file to .env and customize for your installation
# See docs/SELF_HOSTING.md for detailed setup instructions

# =============================================================================
# SPOTIFY API CREDENTIALS (REQUIRED)
# =============================================================================
# Create a Spotify app at: https://developer.spotify.com/dashboard
# See docs/SPOTIFY_APP_SETUP.md for step-by-step instructions

SPOTIFY_CLIENT_ID=your_spotify_client_id_here
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here

# OAuth Redirect URI - MUST match exactly what you set in Spotify Dashboard
# For local development: http://localhost:8001/auth/callback
# For production: https://your-domain.com/auth/callback
SPOTIFY_REDIRECT_URI=http://localhost:8001/auth/callback

# =============================================================================
# SECURITY (REQUIRED)
# =============================================================================
# Generate a secure random string (32+ characters)
# Examples:
#   openssl rand -hex 32
#   python3 -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_SECRET_KEY_MINIMUM_32_CHARACTERS

# =============================================================================
# APPLICATION URL (REQUIRED)
# =============================================================================
# With the unified container, frontend and backend run on the same URL
# Frontend is served as static files, backend API is on the same origin

# For local development (default port 8001):
FRONTEND_URL=http://localhost:8001

# For production with domain:
# FRONTEND_URL=https://playlist.yourdomain.com

# Domain for Traefik routing (production only, optional)
# DOMAIN_PRIMARY=playlist.yourdomain.com

# =============================================================================
# OPTIONAL: ENVIRONMENT
# =============================================================================
# Environment mode: development or production
ENVIRONMENT=production

# =============================================================================
# OPTIONAL: BACKEND CONFIGURATION
# =============================================================================
# Backend server settings
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8001

# Database path (inside container)
# PLAYLISTPOLISHER_DB_PATH=/data/playlist_polisher.db

# =============================================================================
# OPTIONAL: RATE LIMITING
# =============================================================================
# Recommended for public instances to prevent abuse
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=120
RATE_LIMIT_WINDOW_SECONDS=60

# =============================================================================
# OPTIONAL: TRACK CACHING (v2.0.0+)
# =============================================================================
# How many days to keep track metadata in cache before expiring
# Longer = fewer Spotify API calls, but stale data for changed tracks
# Default: 30 days
TRACK_CACHE_TTL_DAYS=30

# =============================================================================
# OPTIONAL: LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file directory (inside container)
# LOG_DIR=/data/logs

# Enable file logging (set to false for testing or console-only logging)
# LOG_FILE_ENABLED=true

# =============================================================================
# OPTIONAL: ADVANCED CORS CONFIGURATION
# =============================================================================
# By default, FRONTEND_URL is used for CORS
# Only needed if accessing from multiple domains (rare for unified container)
# Uncomment to specify multiple origins (comma-separated):
# FRONTEND_ALLOWED_ORIGINS=http://localhost:8001,https://your-domain.com

# =============================================================================
# NOTES
# =============================================================================
# - All REQUIRED fields must be set for the application to work
# - Use strong, randomly generated values for SECRET_KEY
# - Ensure SPOTIFY_REDIRECT_URI matches your Spotify App dashboard exactly
# - Unified container serves frontend + backend on same port (default 8001)
# - For HTTPS, use a reverse proxy like Traefik, Nginx, or Caddy
# - See documentation for advanced configuration options
#
# For help:
#   - Self-hosting guide: docs/self-hosting.md
#   - Spotify setup: docs/spotify-app-setup.md
#   - Issues: https://github.com/consecrated-hammer/playlistpolisher/issues
# =============================================================================
